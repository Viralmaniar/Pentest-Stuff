<h1 id="things-i-learned-today"><b>Fun with JavaScript</b> </h1>



<p>Date - <b><i>30th of January 2016</i></b></p>

<hr>



<h2 id="knowing-mobilelaptop-battery-level-with-javascript">Knowing Mobile/Laptop Battery Level with JavaScript</h2>

<p>Note: Till date I was thinking JavaScript cannot interact with hardware devices on phone or laptop.</p>

<p>Using this JavaScript one can access the battery level of the device. This can cause a privacy issue for some users. Interesting thing to note here is while accessing battery status browser doesn’t ask for permissions from the user. </p>

<p>By continues monitoring the battery status attacker can guess the kind of application user run/view on the device.</p>

<p>For example:- watching video will drain the battery status at a faster rate then listening to audio songs. (Can’t think of better example) - <i>Need to do brainstorming on this.  </i></p>

<p>Code:</p>

<p> <br>
 <br>
  Battery Status API Example <br>
   <br>
    window.onload = function () { <br>
      function updateBatteryStatus(battery) { <br>
        document.querySelector(‘#charging’).textContent = battery.charging ? ‘charging’ : </p>

<p>‘not charging’; <br>
        document.querySelector(‘#level’).textContent = battery.level; <br>
        document.querySelector(‘#dischargingTime’).textContent = battery.dischargingTime / </p>

<p>60; <br>
      }</p>

<pre><code>  navigator.getBattery().then(function(battery) {
    // Update the battery status initially when the promise resolves ...
    updateBatteryStatus(battery);

    // .. and for any subsequent updates.
    battery.onchargingchange = function () {
      updateBatteryStatus(battery);
    };

    battery.onlevelchange = function () {
      updateBatteryStatus(battery);
    };

    battery.ondischargingtimechange = function () {
      updateBatteryStatus(battery);
    };
  });
};
</code></pre>

 <br>
 <br>
 <br>
  <div id="charging">(charging state unknown)</div> <br>
  <div id="level">(battery level unknown)</div> <br>
  <div id="dischargingTime">(discharging time unknown)</div> <br>
 <br>


<p>Reference: <a href="https://www.w3.org/TR/2014/CR-battery-status-20141209/">https://www.w3.org/TR/2014/CR-battery-status-20141209/</a></p>