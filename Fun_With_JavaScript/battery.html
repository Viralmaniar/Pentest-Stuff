<h1 id="things-i-learned-today"><b>Fun with JavaScript</b> </h1>



<p>Date - <b><i>31st of January 2016</i></b></p>

<hr>



<h2 id="getting-mobilelaptop-battery-status-with-javascript">Getting Mobile/Laptop Battery Status with JavaScript</h2>

<p>This code can be used to get the battery status of the mobile phone and laptop users. This can have a security/privacy impact as this doesnâ€™t need any user permission from the end user. </p>

<p>If attacker can constantly monitor the user battery status in the background assuming user never closes the tab in the browser then using some  mathematical equation one correlate the user activities on phone/laptop. <i>Example:</i>watching video can drain battery quicker than listening to audio files on the mobile phone/laptop.</p>

<p>(Need further research in this area) </p>

<p>Browser Support:</p>

<ol>
<li>Chrome</li>
<li>Firefox</li>
<li>Opera</li>
<li>Default Samsung Browser</li>
<li>Android Webview</li>
</ol>

<p>Code:</p>

<p><code>&lt;!DOCTYPE html&gt;</code> <br>
<code>&lt;html&gt;</code> <br>
<code>&lt;head&gt;</code> <br>
<code>&lt;title&gt;Battery Status API Example&lt;/title&gt;</code> <br>
<code>&lt;script&gt;</code> <br>
<code>window.onload = function () {</code> <br>
  <code>function updateBatteryStatus(battery) {</code> <br>
<code>document.querySelector('#charging').textContent = battery.charging ? 'charging' : 'not charging';</code> <br>
    <code>document.querySelector('#level').textContent = battery.level;</code> <br>
<code>document.querySelector('#dischargingTime').textContent = battery.dischargingTime / 60;</code> <br>
   <code>}</code> <br>
<code>navigator.getBattery().then(function(battery) {</code> <br>
<code>// Update the battery status initially when the promise resolves ... <br>
        updateBatteryStatus(battery);</code> <br>
<code>// .. and for any subsequent updates.</code> <br>
   <code>battery.onchargingchange = function () {</code> <br>
<code>updateBatteryStatus(battery);</code> <br>
<code>};</code> <br>
<code>battery.onlevelchange = function () {</code> <br>
 <code>updateBatteryStatus(battery);</code> <br>
<code>};</code> <br>
<code>battery.ondischargingtimechange = function () {</code> <br>
 <code>updateBatteryStatus(battery);</code> <br>
<code>};</code> <br>
  <code>});</code> <br>
<code>};</code> <br>
<code>&lt;/script&gt;</code> <br>
<code>&lt;/head&gt;</code> <br>
<code>&lt;body&gt;</code> <br>
<code>&lt;div id="charging"&gt;(charging state unknown)&lt;/div&gt;</code> <br>
<code>&lt;div id="level"&gt;(battery level unknown)&lt;/div&gt;</code> <br>
<code>&lt;div id="dischargingTime"&gt;(discharging time unknown)&lt;/div&gt;</code> <br>
<code>&lt;/body&gt;</code> <br>
<code>&lt;/html&gt;</code></p>

<p>Reference:  <br>
<a href="https://www.w3.org/TR/battery-status/">https://www.w3.org/TR/battery-status/</a> <br>
<a href="https://developer.mozilla.org/en/docs/Web/API/Battery_Status_API">https://developer.mozilla.org/en/docs/Web/API/Battery_Status_API</a></p>